<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>	
		*{
			padding: 0;
			margin: 0;
			list-style:none;
		}
		.add{
			width: 140px;
			height: 140px;
			border:1px solid #000;
			font-size:100px;
			text-align: center;
			line-height: 140px;
			cursor:pointer;
			position: relative;
		}
		.add input{
			opacity: 0;
			position: absolute;
			top:0;
			left:0;
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
	<div class="add">+<input type="file" id="fileBtn"></div>
</body>
<script>
	var allType = ['jpg','png' ,'gif' ,'jpeg'],
		size = 3; //mb
	fileBtn.onchange = function(){
		var file = this.files[0];
		var type = file.type.split('/')[1];
		var sizeMb = file.size / 1048576;
		var error = "";
		if(allType.indexOf(type) === -1){
			error = '请上传'+allType.join()+'格式的图片';
		}else if(sizeMb > size){
			error = "请上传小于3MB的文件"
		}
		if(error){
			alert(error);
			return false;
		}
		//显示图片
			//取计算文件
		var fileObj = new FileReader();
		//设置上传文件 参数：文件对象
			fileObj.readAsDataURL(file);
		fileObj.onloadstart = function(){
			//alert('显示loading')
		}
		fileObj.onloadend = function(){
			//alert('隐藏loading')
		}
		fileObj.onload = function(){
			var f = this.result;
			var img = new Image();
			img.src = f;
			img.onload = function(){
				document.body.appendChild(this);
			}
		}
	}

</script>
</html>